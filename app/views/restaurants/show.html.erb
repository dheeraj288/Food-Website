<h2 class="text-4xl font-extrabold text-gray-800 mb-10">üç¥ Our Delicious Menu</h2>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
  <% @restaurant.menu_items.each do |item| %>
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 transition transform hover:-translate-y-1 hover:shadow-2xl duration-300">
      
      <% if item.image_url.present? %>
        <div class="relative w-full h-48">
          <img src="<%= item.image_url %>" alt="<%= item.name %>" class="w-full h-full object-cover">
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-4 py-2 text-white">
            <h3 class="text-lg font-semibold">
              <%= item.name %>
            </h3>
            <span class="text-sm font-medium text-indigo-300">‚Çπ<%= item.price %></span>
          </div>
        </div>
      <% else %>
        <div class="w-full h-48 bg-gray-100 flex items-center justify-center text-gray-500 text-sm">No Image Available</div>
      <% end %>

      <div class="p-5 space-y-3">
        <span class="inline-block bg-indigo-100 text-indigo-700 text-xs font-semibold px-3 py-1 rounded-full">
          <%= item.dish_category.name %>
        </span>

        <p class="text-gray-600 text-sm line-clamp-3">
          <%= item.description.to_plain_text.truncate(150) %>
        </p>

        <div class="flex justify-between items-center pt-4">
          <span class="text-indigo-600 font-bold text-lg">‚Çπ<%= item.price %></span>
          <div class="flex space-x-4 text-sm">
            <%= link_to "Edit", edit_restaurant_menu_item_path(@restaurant, item), class: "text-blue-600 hover:underline font-medium" %>
            <%= link_to "Delete", restaurant_menu_item_path(@restaurant, item), method: :delete, data: { confirm: "Are you sure you want to delete this item?" }, class: "text-red-600 hover:underline font-medium" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="mt-12 flex justify-end">
  <%= link_to "‚ûï Add New Item", new_restaurant_menu_item_path(@restaurant),
    class: "inline-block bg-indigo-600 text-white font-semibold text-base px-6 py-3 rounded-full shadow-lg hover:bg-indigo-700 hover:shadow-xl transition" %>
</div>

<h3 class="text-2xl font-semibold text-gray-800 mt-10 mb-4">üí¨ Customer Reviews</h3>

<!-- Reviews List -->
<% @restaurant.reviews.each do |review| %>
  <div class="bg-gray-100 rounded-md p-4 mb-3">
    <div class="flex justify-between items-center">
      <strong><%= review.user.email %></strong>
      <span class="text-yellow-500">‚≠ê <%= review.rating %>/5</span>
    </div>
    <p class="text-sm text-gray-700 mt-1"><%= review.comment %></p>
  </div>
<% end %>

<!-- Add Review -->
<h4 class="mt-6 font-bold text-lg">‚ûï Add Your Review</h4>

<%= form_with model: [@restaurant, Review.new], local: true, class: "space-y-4 mt-2" do |f| %>
  <div>
    <%= f.label :rating, "Rating (1 to 5)" %>
    <%= f.number_field :rating, in: 1..5, class: "border p-2 rounded w-full" %>
  </div>

  <div>
    <%= f.label :comment, "Comment" %>
    <%= f.text_area :comment, rows: 3, class: "border p-2 rounded w-full" %>
  </div>

  <%= f.submit "Submit Review", class: "bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700" %>
<% end %>
